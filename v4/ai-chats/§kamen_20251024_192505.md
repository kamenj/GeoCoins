§kamen_20251024_192505

In **add-new mode**, the value of `idStr` would be an **empty string** (`""`).

This is because in the `openMapPointDetailsForAdd()` function (line 1216), the `mpd-id` field is explicitly set to empty:

```javascript
export function openMapPointDetailsForAdd() {
  Config.MapPointDetails.mode = "add";
  setText("mpd-mode-indicator", "(Add New)");
  setVal("mpd-id", "");  // ← Set to empty string
  // ... rest of the code
}
```

So when `saveMapPointFromDetails()` runs:
```javascript
var idStr = getVal("mpd-id");  // Returns "" (empty string)
```

This empty string is then used in the conditional logic to determine whether to add a new point or update an existing one:

```javascript
if (Config.MapPointDetails.mode === "add") {
  // Add new point - idStr is ""
  var newPointData = { ... };
  var result = await DB.addPoint(newPointData);
  // ...
} else if (Config.MapPointDetails.mode === "edit") {
  // Update existing point - idStr would have a numeric value
  var id = Number(idStr);
  // ...
}
```

The code correctly uses `Config.MapPointDetails.mode` to determine the action rather than relying on `idStr`, which is a good design pattern.